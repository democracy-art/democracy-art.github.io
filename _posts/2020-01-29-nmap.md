---
layout:     post
title:      nmap使用介绍
subtitle:   
date:       2020-01-29
author:     D
header-img: 
catalog: true
mermaid: true
tags:
    - SecTools
---
# nmap安装

在CentOS
```
yum install nmap -y
```
在Debian
```
apt-get install nmap
```
在Ubuntu
```
sudo apt-get install nmap
```
# nmap扫描tcp端口

```
nmap 10.0.1.161  -p1-65535
```
- `-p` 指定端口范围使用-p参数,<br>
如果不指定要扫描的端口,Nmap默认扫描从1到1024再加上nmap-services列出的端口.<br>
nmap-services是一个包含大约2200个著名的服务的数据库，<br>
Nmap通过查询该数据库可以报告那些端口可能对应于什么服务器，但不一定正确.<br>
所以正确扫描一个机器开放端口的方法是上面命令 `-p1-65535`<br>


连续的端口可以使用横线连起来，端口之间可以使用逗号隔开如下:<br>
```
nmap  10.0.1.161   -p20-200,7777,8888
```

# nmap扫描udp端口

```
nmap  -sU  10.0.1.161  -Pn
```
参数解释:<br>
- `-sU`:表示udp scan ， udp端口扫描
- `-Pn`:不对目标进行ping探测(不判断主机是否在线)(直接扫描端口)<br>
**对于udp端口扫描比较慢，扫描完6万多个端口需要20分钟左右**

# 扫描多个IP用法

1.中间用空格分开
```
nmap 10.0.1.161  10.0.1.162
```
2.逗号隔开
```
nmap 10.0.1.161,162
```
3.连续的ip地址用横线 `-`
```
nmap 10.0.1.161-162
```

# 扫描一个子网网段所有IP
```
nmap  10.0.3.0/24
```

# 扫描文件里的IP,输出到文件
比如文件 `ip.txt` 里面ip如下:
```
10.0.1.161
10.0.1.162
```
nmap扫描命令如下:
```
nmap -iL ip.txt -oN output.txt
```
- `-oN` 以正常的格式输出到文件,比如上面就是输出到output.txt

# 扫描地址段是排除某个/多个IP地址
## 某个/多个IP地址,用法如下:
```
nmap 10.0.1.161-162  --exclude 10.0.1.162
```
## 排除多个IP地址,用法如下:
```
nmap 10.0.1.161-163 --exclude 10.0.1.162-163
```
## 排除分散的，使用逗号隔开,如下:
```
nmap 10.0.1.161-163 --exclude 10.0.1.161,10.0.1.163
```
## 扫描多个地址时排除文件里的IP地址
(可以用来排除不连续的IP地址)<br>
把10.0.1.161和10.0.1.163添加到一个文件里，文件名可以随意取<br>
下面扫描10.0.1.161到10.0.1.163 这3个IP地址，排除10.0.1.161和10.0.1.163这两个IP<br>
```
nmap 10.0.1.161-163  --excludefile ex.txt
```
ex.txt 内容如下:
```
10.0.1.161
10.0.1.163
```
